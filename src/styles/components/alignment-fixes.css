/* AuditVerse Alignment and Visibility Fixes */

/* =================================
   1. GLOBAL ALIGNMENT FIXES
   ================================= */

/* Fix baseline alignment for all text elements */
* {
    vertical-align: baseline;
}

/* Ensure consistent flex alignment */
.flex,
.inline-flex,
[class*="flex"] {
    align-items: center;
}

/* Fix grid alignment issues */
.container {
    grid-template-columns: 300px 1fr 350px;
    grid-template-rows: auto 1fr auto;
    align-items: start;
    height: 100vh;
    display: grid;
}

/* =================================
   2. HEADER ALIGNMENT FIXES
   ================================= */

/* Ensure header elements are properly aligned */
.header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: 100px;
    padding: 15px 25px;
}

/* Fix title alignment */
.title {
    display: flex;
    align-items: center;
    line-height: 1;
    margin: 0;
    flex-shrink: 0;
}

/* Align filter container properly */
.filters-container {
    display: flex;
    align-items: center;
    justify-content: center;
    height: auto;
    min-height: 50px;
    padding: 8px 15px;
    margin: 0 20px;
}

/* Fix header stats alignment */
.header-stats {
    display: flex;
    align-items: center;
    justify-content: center;
    height: auto;
    min-height: 50px;
    padding: 8px 15px;
    gap: 15px;
}

/* Ensure stat items are properly aligned */
.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 40px;
    padding: 8px 12px;
}

.stat-label {
    line-height: 1.2;
    margin-bottom: 4px;
}

.stat-value {
    line-height: 1;
    margin: 0;
}

/* =================================
   3. FILTER GROUP ALIGNMENT
   ================================= */

/* Fix filter group alignment */
.filter-group {
    display: flex;
    align-items: center;
    height: auto;
    min-height: 40px;
    padding: 6px 12px;
}

/* Align filter labels */
.filter-label {
    display: flex;
    align-items: center;
    line-height: 1;
    margin: 0;
    padding: 0;
}

/* Fix multiselect alignment */
.filter-multiselect {
    display: flex;
    align-items: center;
    min-height: 30px;
}

.filter-selected {
    display: flex;
    align-items: center;
    min-height: 28px;
    padding: 6px 25px 6px 10px;
}

/* =================================
   4. DROPDOWN ALIGNMENT FIXES
   ================================= */

/* Ensure dropdowns are properly positioned */
.filter-dropdown {
    position: absolute;
    top: 100%;
    margin-top: 5px;
    z-index: 99999;
}

/* Fix dropdown trigger alignment */
.dropdown-trigger {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: 36px;
    line-height: 1;
}

/* Align dropdown items */
.dropdown-item,
.filter-option {
    display: flex;
    align-items: center;
    min-height: 32px;
    padding: 8px 12px;
}

/* Fix checkbox alignment in dropdowns */
.filter-option-checkbox {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

/* =================================
   5. BUTTON ALIGNMENT FIXES
   ================================= */

/* Fix all button alignments */
.btn,
button,
[type="button"],
[type="submit"],
.filter-select-btn,
.dropdown-action-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    text-align: center;
    vertical-align: middle;
}

/* Fix button text centering */
.btn > *,
button > * {
    vertical-align: middle;
}

/* =================================
   6. SIDEBAR CONTROL ALIGNMENT
   ================================= */

/* Align control panel items */
.controls,
.side-panel {
    padding: 20px;
}

.control-group {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
}

.control-label {
    display: flex;
    align-items: center;
    line-height: 1.2;
    margin-bottom: 5px;
}

/* Fix slider alignment */
input[type="range"] {
    display: block;
    width: 100%;
    margin: 10px 0;
}

/* =================================
   7. VISIBILITY IMPROVEMENTS
   ================================= */

/* Increase minimum font sizes for readability */
.stat-label,
.filter-label {
    font-size: max(0.7rem, 11px) !important;
    font-weight: 700;
    opacity: 0.9;
}

.stat-value {
    font-size: max(1.1rem, 16px) !important;
    font-weight: 900;
}

.filter-placeholder {
    font-size: max(0.75rem, 12px) !important;
}

.filter-option,
.dropdown-item {
    font-size: max(0.8rem, 13px) !important;
}

/* Improve text contrast */
.stat-label {
    color: #ff66ff;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
}

.stat-value {
    color: #00ffdd;
    text-shadow: 0 1px 3px rgba(0,0,0,0.5);
}

.filter-label {
    color: #ff66ff;
    opacity: 1;
}

/* Enhance visibility of placeholder text */
.filter-placeholder,
.audit-placeholder {
    color: rgba(0, 255, 204, 0.6);
}

/* Improve button visibility */
.btn,
.filter-select-btn,
.dropdown-action-btn {
    font-weight: 700;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

/* =================================
   8. Z-INDEX HIERARCHY FIX
   ================================= */

/* Establish proper z-index hierarchy */
.header {
    z-index: 100;
}

.filters-container {
    z-index: 200;
}

.filter-multiselect {
    z-index: 300;
}

.filter-dropdown,
.dropdown-content {
    z-index: 10000 !important;
}

.modal,
.overlay {
    z-index: 20000;
}

.notification {
    z-index: 30000;
}

/* =================================
   9. OVERFLOW AND SPACING FIXES
   ================================= */

/* Prevent text overflow */
.filter-placeholder,
.audit-placeholder,
.stat-label,
.filter-label {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}

/* Fix spacing consistency */
.filter-group,
.stat-item,
.control-group {
    margin: 0;
}

.filters-container > *,
.header-stats > * {
    margin: 0;
}

/* =================================
   10. METALLIC EFFECT ADJUSTMENTS
   ================================= */

/* Reduce excessive shadows for better readability */
.metallic-element,
.metallic-panel,
.metallic-button {
    box-shadow:
        inset 0 1px 2px rgba(0,0,0,0.3),
        0 1px 3px rgba(0,0,0,0.4);
}

/* Simplify metallic gradients */
.header,
.filters-container,
.header-stats {
    background: linear-gradient(135deg, #2a2a2f 0%, #323237 100%);
}

/* =================================
   11. RESPONSIVE ALIGNMENT
   ================================= */

/* Ensure elements stay aligned on smaller screens */
@media (max-width: 1400px) {
    .container {
        grid-template-columns: 250px 1fr 300px;
    }

    .filter-group {
        min-width: 140px;
    }
}

@media (max-width: 1200px) {
    .header {
        flex-wrap: wrap;
        min-height: auto;
        padding: 10px 15px;
    }

    .filters-container {
        width: 100%;
        margin: 10px 0;
    }
}

/* =================================
   12. FOCUS STATE IMPROVEMENTS
   ================================= */

/* Better focus indicators for accessibility */
*:focus {
    outline: 2px solid rgba(0, 255, 204, 0.5);
    outline-offset: 2px;
}

button:focus,
.btn:focus,
.filter-selected:focus {
    outline: 2px solid #00ffcc;
    outline-offset: 3px;
}

/* =================================
   13. HOVER STATE ALIGNMENT
   ================================= */

/* Prevent layout shift on hover */
.btn:hover,
.filter-select-btn:hover,
.stat-item:hover {
    transform: translateY(-1px);
}

.filter-option:hover,
.dropdown-item:hover {
    padding-left: 16px;
}

/* =================================
   14. ANIMATION PERFORMANCE
   ================================= */

/* Use GPU acceleration for smooth animations */
.btn,
.filter-selected,
.dropdown-trigger,
.stat-item {
    will-change: transform;
    transform: translateZ(0);
}

/* Reduce animation complexity */
@media (prefers-reduced-motion: reduce) {
    * {
        animation: none !important;
        transition: none !important;
    }
}

/* =================================
   15. FINAL Z-INDEX HIERARCHY
   ================================= */

/* Establish comprehensive z-index system */
.container { z-index: 1; }
.controls {
    z-index: 10;
    height: 100%;
    overflow-y: auto;
}
.graph {
    z-index: 10;
    height: 100%;
    position: relative;
}
.details {
    z-index: 10;
    height: 100%;
    overflow-y: auto;
}
.timeline { z-index: 10; }
.header { z-index: 100; }
.filters-container { z-index: 200; }
.filter-group { z-index: 250; }
.filter-multiselect { z-index: 300; }
.audit-multiselect { z-index: 300; }
.dropdown { z-index: 400; }
.dropdown-trigger { z-index: 450; }
.filter-dropdown,
.dropdown-content,
.audit-dropdown { z-index: 10000 !important; }
.tooltip { z-index: 15000; }
.modal-backdrop { z-index: 19000; }
.modal { z-index: 20000; }
.notification-container { z-index: 25000; }
.notification { z-index: 30000; }
.welcome-modal { z-index: 35000; }

/* =================================
   16. FINAL ALIGNMENT ADJUSTMENTS
   ================================= */

/* Ensure all flex containers align properly */
/* Note: Exclude .container class to preserve grid layout */
.filters-container,
.header-stats,
[class*="group"]:not(.filter-group),
[class*="panel"] {
    display: flex;
    align-items: center;
}

/* Fix any remaining text baseline issues */
span,
label,
p,
h1, h2, h3, h4, h5, h6 {
    line-height: 1.2;
    vertical-align: baseline;
}

/* Ensure form controls are consistently aligned */
input,
select,
textarea,
button {
    vertical-align: middle;
}

/* Fix icon alignment */
.icon,
[class*="icon"] {
    vertical-align: middle;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Ensure consistent padding and margins */
.control-section,
.filter-group,
.stat-item,
.dropdown-item {
    box-sizing: border-box;
}

/* Final visibility enhancements */
body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    height: 100vh;
    overflow: hidden;
}

/* Ensure SVG graph fills container */
#knowledge-graph {
    width: 100%;
    height: 100%;
}